<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Photo Carousel</title>
  <!-- Slick Carousel CSS -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  <style>
    /* Optional: Add custom styles for the carousel container */
    .carousel-container {
      max-width: 800px;
      margin: auto;
    }
  </style>
</head>
<body>

<div class="carousel-container">
  <div id="photo-carousel"></div>
</div>

<!-- jQuery and Slick Carousel JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>
  const username = 'That1OrigamiKid';
  const repo = 'OKWallpapers';
  const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents`;

  fetch(apiUrl)
    .then(response => {
      if (!response.ok) {
        throw new Error(`Failed to fetch GitHub data: ${response.statusText}`);
      }
      return response.json();
    })
    .then(data => {
      const imageFiles = data.filter(file => file.type === 'file' && file.name.match(/\.(jpg|jpeg|png|gif)$/i));
      const imageUrls = imageFiles.map(file => file.download_url);

      if (imageUrls.length === 0) {
        throw new Error('No image files found in the repository.');
      }

      $('#photo-carousel').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        dots: true,
        infinite: true,
        responsive: [
          {
            breakpoint: 768,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          }
        ],
        appendDots: $('.carousel-container'),
        customPaging: function(slider, i) {
          return '<img src="' + imageUrls[i] + '" alt="thumbnail">';
        },
        slides: imageUrls.map(url => `<div><img src="${url}" alt="GitHub Photo"></div>`)
      });
    })
    .catch(error => console.error(error));
</script>

</body>
</html>